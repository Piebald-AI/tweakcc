# LDD Loop Designer

> 通过交互式访谈，引导用户设计可迭代优化的 Loop

## 设计原则

1. **人类定标准** — 验证标准必须由人类确认
2. **设计即验证** — 设计过程中发现断点，无法设计 = 无法闭环
3. **聚焦 EOVM** — 围绕核心循环展开设计

---

## 流程概览

```
阶段 1: 界定
    ↓
阶段 2: 设计 EOVM（设计过程中验证闭环）
    ↓
输出: LOOP-DESIGN.md
```

---

## 阶段 1: 界定

**目标**：把模糊的想法变成可处理的问题

用户来的时候往往带着方案、症状或感觉，而非清晰的问题。界定的工作是通过追问，帮用户搞清楚真正要解决什么。

### 探测维度

**边界**（什么在内/外）
- 说的是方案还是问题？方案背后的问题是什么？
- 明确不包括什么？不处理什么？
- 这是症状还是根因？往上追一层是什么？

**粒度**（抽象 ↔ 具体）
- 太抽象：这具体指什么？能举个例子吗？
- 太具体：这属于什么更大的问题？
- 找到能采取行动的那一层

**时间**（因果链）
- 为什么会到这一步？（向后追溯）
- 解决了之后会怎样？（向前推演）
- 在因果链上，改变哪个点杠杆最大？

**动机**（目的与约束）
- 为什么对你重要？背后真正想要什么？
- 什么是必须满足的？什么其实可以放弃？
- 有什么"一直这么做"的假设？

### 完成标准

- 用户能一句话说清"我要解决的是___"
- 边界明确（知道什么不做）
- 触及真实动机（不是表面诉求）

---

## 阶段 2: 设计 EOVM

**目标**：设计闭环的每个环节，设计过程中验证闭环是否成立

### 闭环的本质

```
E → O → V → M → E → ...

变化能被捕获 → 捕获能被判断 → 判断能指导调整 → 调整能产生新变化
```

**设计即验证**：如果某个环节设计不出来，就是断点，说明无法闭环。

---

### 2.1 Execute（执行）

> 什么动作能产生可观测的变化？

**确认**：
- 输入是什么？
- 执行什么操作？
- 产生什么变化？

**断点信号**：无法定义清晰的执行动作

---

### 2.2 Observe（观测）

> 如何把变化捕获为可比较的形式？

**确认**：
- 捕获什么？
- 以什么形式？（结构化 / 文本 / 指标）
- 如何保证可比较？

**断点信号**："每次都不一样，没法比较"

---

### 2.3 Verify（验证）

> 什么信号能判断方向对不对？

**两种模式**：

| 模式 | 验证者 | 每轮参与 | 适用场景 |
|------|--------|---------|---------|
| **自动验证** | 硬指标 / AI 红旗检测 | 自动 | 有明确规则 |
| **人类在环** | 人类判断 | 每轮 | 依赖审美、语感、专业判断 |

如果验证依赖人类判断，人类就是闭环的必要组成部分，每轮都需要参与。

**确认**：
- 验证信号是什么？
- 谁来验证？（自动 / 人类在环）
- 如果是人类在环，人类判断什么？

**断点信号**："我也说不清什么算好"

---

### 2.4 Modify（修改）

> 验证结果如何转化为下一轮的调整？

M 不只是"改"，而是**假设-验证**的过程：

| 步骤 | 做什么 |
|------|--------|
| **归因** | 为什么当前结果不够好？ |
| **假设** | 如果改 X，应该会变好 |
| **对抗** | 第三方审视：这个修改合理吗？ |
| **修改** | 基于假设进行调整 |
| **预期** | 下一轮应该看到什么变化？ |

下一轮的 Verify 同时验证两件事：
1. 结果好不好？
2. 假设对不对？

#### 对抗位

执行 Loop 的 agent 有"通过验证"的动机，容易贪婪地选择特例化方案（过拟合）。需要引入**没有 context 污染的第三方**来审视修改：

- 这个修改是解决根本问题，还是打补丁？
- 是泛化的还是特例化的？
- 换一个输入，还有效吗？

**实现方式**：无同源 context 的 subagent、外部对抗工具等。

**确认**：
- 如何归因？（人类判断 / AI 分析）
- 修改什么？
- 如何验证假设？
- 是否需要对抗位？如何引入？

**断点信号**："知道不好但不知道怎么改"

---

### 2.5 反思与工具化

设计完成后，反思整个 EOVM：

- 哪些环节是手动的？哪些可以自动化？
- 哪些环节容易出错或遗漏？
- 哪些环节可以增加辅助工具来更好地完成闭环？

**和用户确认**：是否需要为某些环节设计辅助工具？

---

## 输出

完成界定和 EOVM 设计后，使用命令生成模板：

```bash
.claude/skills/ldd/ldd.sh add <项目名>
```

命令会：
1. 创建 `.ldd/README.md`（LDD 原理，如果不存在）
2. 创建 `.ldd/{项目名}-{hex6}/LOOP-DESIGN.md`（设计模板）

然后根据访谈结果填写模板：
- **问题**：填入阶段 1 界定的结果
- **EOVM**：填入阶段 2 设计的结果
- **开发指引**：补充具体的实现指导，让下一个 agent 能开发执行器/观测器/验证器
- **运行指引**：描述 Loop 流程、终止条件、人类参与点

---

*LDD 的价值不在于全自动化，而在于结构化人机协作。*
